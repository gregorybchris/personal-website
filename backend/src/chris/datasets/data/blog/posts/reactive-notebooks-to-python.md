---
date: 2023-03-25
slug: reactive-notebooks-to-python
title: Bringing Reactive Notebooks to Python
archived: false
---

<a href="https://observablehq.com" target="_blank">Observable</a> is a platform for writing notebooks in JavaScript. It was created by Mike Bostock, the creator of D3.js, and has a strong focus on interactivity and reactivity. After working with it for a bit and then using Jupyter notebooks, I started to wonder why we don't have a similar reactive notebook for Python.

When working at Microsoft I saw issues with using Jupyter notebooks for data science and machine learning.

We had example notebooks whose contents would need to be cleared. The infrastructure for testing the notebooks was fragile and required many adhoc scripts in the CI/CD pipelines. Notebooks would need environment specifications and that meant either having separate environments for each notebook if they had different dependencies, or having a single environment with all the dependencies for all the notebooks, which would lead to dependency conflicts and bloat.

Notebooks also don't play very nicely with version control. Partly this is a direct conflict with one of the best features of notebooks, that they can embed plots, audio files, etc that were generated during notebook execution. This can make it easy to share the artifacts generated by a notebook along with the code that generated them and other inline markdown notes. But it also means that the notebook file can be hard to diff from version to version.

Jupyter notebooks aren't stable enough for production because they don't have a clear cell execution order. It's also difficult or impossible to call into a notebook from a script or another notebook, making it difficult to build modular code around notebooks.

Terminal REPLs (like IPython) are difficult to use for most users.

- If you clear a cell all descendants are cleared
- If you run a cell and its output changes all descendants are updated
- Cells specify their outputs and inputs
- Cells can only have one output
- Only one cell can produce a given output
- You can create multiple notebooks
- You can change a cell's type to markdown
- You can reorder cells easily by dragging and dropping

I really liked the power of notebooks -- being able to separate blocks of logic visually and then running just a single block of code through the interpreter at a time. This gives you the full benefits of developing with an IDE, but with the ability to hook into any part of the code and try out different things without swapping between the editor and a terminal and without having to write boilerplate code for entrypoints to a program.

I wanted the power of notebooks, but without what I saw as one of the biggest pitfalls, the unclear cell execution order. I thought it was very cool that you could edit one cell, run it, and have all dependent cells update automatically.

So I built Cado, a reactive notebook for Python. I wanted to be able to detect cycles and block situations where notebooks could get into a funky state.
